Fully connected layer:

The fully connected layer model consists of 256 inputs in the input layer and 256 outputs in the output layer.
The inputs are loaded onto four vector registers and the 256 weights for each of the output node are called accordingly into four more regs and are multiplied and added onto one register. The MAC is performed and the bias stored in the scaler memory is added to it and stored in the VDMEM.
RESULT IS STORED IN 66001 - 66256

SDMEM
256, 64, 65536, 1, 80000, bias terms - 256 starting from 5
VDMEM
256 *256 elements, inputs stored at 70,000



LS SR1 SR0 0 # SR1 = 256
LS SR2 SR0 1 # SR2 = 64
LS SR3 SR0 2 # SR3 = 65537
LS SR5 SR0 3 # SR5 = 1
LS SR6 SR0 1 # SR6 = 64
LS SR7 SR0 4 # SR7 = 80,000

# load the inputs
LV VR0 SR3
ADD  SR3 SR3 SR2 # SR3 = 70,064
LV VR1 SR3
ADD  SR3 SR3 SR2 # SR3 = 70,128
LV VR2 SR3
ADD  SR3 SR3 SR2 # SR3 = 70,192
LV VR3 SR3

# MAKE SR3 THE COUNTER FOR EVERY OUTPUT VALUE I.E 0-255
AND SR3 SR3 SR0 # SR3 = 0

# LOAD THE FIRST WEIGHTS
MTCL SR2
LV VR4 SR4 # SR4 = 0
ADD SR4 SR4 SR2 # SR4 = 64
LV VR5 SR4 
ADD SR4 SR4 SR2 # SR4 = 128
LV VR6 SR4 
ADD SR4 SR4 SR2 # SR4 = 192
LV VR7 SR4 

# MUL AND ADD THE WEIGHTS AND INPUTS
MULVV VR4 VR4 VR0
MULVV VR5 VR5 VR1
MULVV VR6 VR6 VR2
MULVV VR7 VR7 VR3
ADDVV VR4 VR4 VR5
ADDVV VR6 VR6 VR7
ADDVV VR4 VR4 VR6 	# VR4 CONTAINS THE LAST 64 ELEMENTS THAT NEEDS TO BE ACCUMULATED

LS SR6 SR0 1 # SR6 = 64

# MAC ON 64 ELEMENTS
SV VR4 SR0
SRL SR6 SR6 SR5 # SR6 = 32
MTCL SR6
LV VR5 SR6 
ADDVV VR4 VR4 VR5
BGT SR6 SR5 -5

# ADD THE BIAS TERM 
LS SR1 SR3 5 # SR1 = BIAS VALUE
ADDVS VR4 VR4 SR1
LS SR1 SR0 0 # SR1 = 256

# STRORE THE RESULT AT 80,0000 AND UPDATE SR7 BY ONE
SV VR4 SR7
ADD SR7 SR7 SR5 # SR7 = 80,001

# UPDATE COUNT 
ADD SR3 SR3 SR5 	# SR3 = 1

BLT SR3 SR1 -28